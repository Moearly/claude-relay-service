# ğŸš€ å¿«é€Ÿé…ç½®æŒ‡å—

## ğŸ“¦ å·²å®Œæˆçš„éƒ¨ç½²

âœ… **å‰ç«¯ç½‘ç«™å·²éƒ¨ç½²åˆ° Vercel**
- å½“å‰åœ°å€: https://commercial-website-ql1qg8fv9-martn-leis-projects.vercel.app
- API é…ç½®: `https://api.codefog.cc`

## ğŸ¯ é…ç½®è‡ªå®šä¹‰åŸŸå (codefog.cc)

### æ–¹å¼ä¸€ï¼šè‡ªåŠ¨é…ç½®ï¼ˆæ¨èï¼‰âš¡

```bash
# 1. è®¾ç½®ç¯å¢ƒå˜é‡
export CLOUDFLARE_API_TOKEN="ä½ çš„API Token"      # ä» Cloudflare è·å–
export CLOUDFLARE_ZONE_ID="ä½ çš„Zone ID"          # ä» Cloudflare è·å–
export API_SERVER_IP="ä½ çš„æœåŠ¡å™¨IP"               # åç«¯æœåŠ¡å™¨çš„å…¬ç½‘ IP

# 2. è¿è¡Œé…ç½®è„šæœ¬
cd /home/leiyi/codeSpace/ApiRelay
./scripts/setup-dns.sh
```

### æ–¹å¼äºŒï¼šäº¤äº’å¼é…ç½®

```bash
cd /home/leiyi/codeSpace/ApiRelay
./scripts/setup-dns.sh
# è„šæœ¬ä¼šæç¤ºä½ è¾“å…¥æ‰€éœ€ä¿¡æ¯
```

### æ–¹å¼ä¸‰ï¼šæ‰‹åŠ¨é…ç½®

å¦‚æœä¸æƒ³ä½¿ç”¨è„šæœ¬ï¼Œè¯·æŸ¥çœ‹ [CLOUDFLARE_SETUP.md](./CLOUDFLARE_SETUP.md) è·å–è¯¦ç»†çš„æ‰‹åŠ¨é…ç½®æ­¥éª¤ã€‚

## ğŸ“‹ è·å–å¿…éœ€ä¿¡æ¯

### 1. Cloudflare API Token

1. è®¿é—®: https://dash.cloudflare.com/profile/api-tokens
2. ç‚¹å‡» **Create Token**
3. ä½¿ç”¨ **Edit zone DNS** æ¨¡æ¿
4. é€‰æ‹©åŸŸå `codefog.cc`
5. å¤åˆ¶ç”Ÿæˆçš„ Token

### 2. Cloudflare Zone ID

1. è®¿é—®: https://dash.cloudflare.com
2. é€‰æ‹© `codefog.cc` åŸŸå
3. åœ¨é¡µé¢å³ä¸‹è§’æ‰¾åˆ° **Zone ID**
4. ç‚¹å‡»å¤åˆ¶

### 3. API æœåŠ¡å™¨ IP

```bash
# åœ¨ä½ çš„æœåŠ¡å™¨ä¸Šè¿è¡Œ
curl ifconfig.me
```

## âœ… é…ç½®å®Œæˆå

### 1. åœ¨ Vercel æ·»åŠ åŸŸå

è®¿é—®: https://vercel.com/martn-leis-projects/commercial-website/settings/domains

æ·»åŠ :
- `codefog.cc`
- `www.codefog.cc` (å¯é€‰)

### 2. éªŒè¯è®¿é—®

ç­‰å¾… 5-30 åˆ†é’Ÿåè®¿é—®:
- **å‰ç«¯**: https://codefog.cc
- **API**: https://api.codefog.cc/health

### 3. æ£€æŸ¥ DNS ä¼ æ’­

```bash
# å‘½ä»¤è¡Œæ£€æŸ¥
dig codefog.cc
dig www.codefog.cc
dig api.codefog.cc

# æˆ–è®¿é—®åœ¨çº¿å·¥å…·
# https://www.whatsmydns.net/
```

## ğŸ”§ åç«¯æœåŠ¡å™¨é…ç½®

ç¡®ä¿åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œ:

```bash
# SSH è¿æ¥åˆ°æœåŠ¡å™¨
ssh user@your-server-ip

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/claude-relay-service

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
npm run service:status

# å¦‚æœæœªè¿è¡Œï¼Œå¯åŠ¨æœåŠ¡
npm run service:start:daemon

# æŸ¥çœ‹æ—¥å¿—
npm run service:logs
```

### é…ç½® CORS

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œæ·»åŠ :

```bash
CORS_ORIGIN=https://codefog.cc,https://www.codefog.cc
```

é‡å¯æœåŠ¡:
```bash
npm run service:restart
```

## ğŸ“Š DNS è®°å½•æ¦‚è§ˆ

é…ç½®å®Œæˆåçš„ DNS è®°å½•:

| è®°å½•ç±»å‹ | åç§° | æŒ‡å‘ | ä»£ç†çŠ¶æ€ | ç”¨é€” |
|---------|------|------|---------|------|
| CNAME | @ | cname.vercel-dns.com | âšª DNS only | ä¸»åŸŸå |
| CNAME | www | cname.vercel-dns.com | âšª DNS only | WWW |
| A | api | [æœåŠ¡å™¨IP] | ğŸŸ  Proxied | API |

## ğŸ‰ æ¶æ„å›¾

```
ç”¨æˆ·
  â†“
codefog.cc â†’ Cloudflare DNS â†’ Vercel CDN â†’ Next.js å‰ç«¯
  â†“
api.codefog.cc â†’ Cloudflare Proxy â†’ ä½ çš„æœåŠ¡å™¨ â†’ Claude Relay Service
```

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

- è¯¦ç»†é…ç½®: [CLOUDFLARE_SETUP.md](./CLOUDFLARE_SETUP.md)
- é¡¹ç›®æ–‡æ¡£: [README.md](./README.md)

---

**ä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼** ğŸš€

ç°åœ¨ä½ å¯ä»¥è¿è¡Œè‡ªåŠ¨é…ç½®è„šæœ¬æ¥å®ŒæˆåŸŸåé…ç½®ã€‚

