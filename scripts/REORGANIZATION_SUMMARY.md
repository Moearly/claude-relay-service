# Scripts ç›®å½•é‡ç»„æ€»ç»“

## ğŸ“… é‡ç»„æ—¶é—´
2025-10-29

## ğŸ¯ é‡ç»„ç›®æ ‡
1. æŒ‰åŠŸèƒ½åˆ†ç±»ç»„ç»‡è„šæœ¬
2. åˆ é™¤æ— ç”¨å’Œé‡å¤çš„è„šæœ¬
3. æé«˜è„šæœ¬çš„å¯ç»´æŠ¤æ€§å’Œå¯å‘ç°æ€§
4. ç»Ÿä¸€å‘½åè§„èŒƒå’Œä½¿ç”¨æ–¹å¼

---

## ğŸ“Š é‡ç»„å‰åå¯¹æ¯”

### é‡ç»„å‰
- **æ€»è„šæœ¬æ•°**: 36 ä¸ª
- **ç›®å½•ç»“æ„**: æ‰€æœ‰è„šæœ¬æ··åœ¨æ ¹ç›®å½•ï¼ŒåŒ…å«ä¸€ä¸ª `remote/` å­ç›®å½•
- **é—®é¢˜**: 
  - è„šæœ¬æ··ä¹±ï¼Œéš¾ä»¥æŸ¥æ‰¾
  - å­˜åœ¨é‡å¤åŠŸèƒ½çš„è„šæœ¬
  - å­˜åœ¨å·²åºŸå¼ƒçš„è„šæœ¬
  - ç¼ºå°‘æ¸…æ™°çš„åˆ†ç±»

### é‡ç»„å
- **æ€»è„šæœ¬æ•°**: 29 ä¸ªï¼ˆåˆ é™¤ 7 ä¸ªæ— ç”¨è„šæœ¬ï¼‰
- **ç›®å½•ç»“æ„**: æŒ‰åŠŸèƒ½åˆ†ä¸º 4 ä¸ªå­ç›®å½•
  - `deployment/` - 2 ä¸ªéƒ¨ç½²è„šæœ¬
  - `testing/` - 11 ä¸ªæµ‹è¯•è„šæœ¬
  - `maintenance/` - 5 ä¸ªç»´æŠ¤è„šæœ¬
  - `tools/` - 10 ä¸ªè¿ç»´å·¥å…·
  - æ ¹ç›®å½•ä¿ç•™ 1 ä¸ªæ ¸å¿ƒæœåŠ¡ç®¡ç†è„šæœ¬

---

## ğŸ—‘ï¸ åˆ é™¤çš„è„šæœ¬

### 1. é‡å¤åŠŸèƒ½è„šæœ¬
- âŒ `manage.sh` - ä¸ `manage.js` åŠŸèƒ½é‡å¤
- âŒ `debug-redis-keys.js` - ä¸ `check-redis-keys.js` åŠŸèƒ½é‡å¤
- âŒ `data-transfer.js` - è¢« `data-transfer-enhanced.js` æ›¿ä»£

### 2. å·²åºŸå¼ƒè„šæœ¬
- âŒ `deploy.sh` - è¢« `deploy-optimized.sh` æ›¿ä»£
- âŒ `setup.js` - è¢« `init-database.js` æ›¿ä»£

### 3. ä¸€æ¬¡æ€§ä¿®å¤è„šæœ¬
- âŒ `fix-inquirer.js` - é—®é¢˜å·²è§£å†³ï¼Œä¸å†éœ€è¦

### 4. ä¸ç›¸å…³è„šæœ¬
- âŒ `test-web-dist.sh` - å‰ç«¯æµ‹è¯•è„šæœ¬ï¼Œä¸å±äºåç«¯é¡¹ç›®

### 5. ä¸´æ—¶è„šæœ¬
- âŒ `remote/01-é…ç½®CORS.sh` - å·²æ•´åˆåˆ°ä¸»éƒ¨ç½²æµç¨‹
- âŒ `remote/02-å¥åº·æ£€æŸ¥.sh` - å·²æ•´åˆåˆ°ä¸»éƒ¨ç½²æµç¨‹
- âŒ `remote/03-æœåŠ¡ç®¡ç†.sh` - å·²æ•´åˆåˆ°ä¸»éƒ¨ç½²æµç¨‹
- âŒ `remote/04-æŸ¥çœ‹æ—¥å¿—.sh` - å·²æ•´åˆåˆ°ä¸»éƒ¨ç½²æµç¨‹

**åˆ é™¤æ€»è®¡**: 11 ä¸ªæ–‡ä»¶

---

## ğŸ“ æ–°ç›®å½•ç»“æ„

```
scripts/
â”œâ”€â”€ manage.js                          # æœåŠ¡ç®¡ç†ä¸»è„šæœ¬
â”œâ”€â”€ README.md                          # å®Œæ•´æ–‡æ¡£
â”œâ”€â”€ REORGANIZATION_SUMMARY.md          # æœ¬æ–‡æ¡£
â”‚
â”œâ”€â”€ deployment/                        # éƒ¨ç½²ç›¸å…³ (2ä¸ª)
â”‚   â”œâ”€â”€ deploy-optimized.sh           # â­ ç”Ÿäº§éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ check-env.sh                  # ç¯å¢ƒæ£€æŸ¥
â”‚
â”œâ”€â”€ testing/                           # æµ‹è¯•ç›¸å…³ (11ä¸ª)
â”‚   â”œâ”€â”€ test-api.js                   # â­ ä¸»è¦APIæµ‹è¯•
â”‚   â”œâ”€â”€ generate-test-data.js         # æµ‹è¯•æ•°æ®ç”Ÿæˆ
â”‚   â”œâ”€â”€ test-account-display.js
â”‚   â”œâ”€â”€ test-api-response.js
â”‚   â”œâ”€â”€ test-bedrock-models.js
â”‚   â”œâ”€â”€ test-dedicated-accounts.js
â”‚   â”œâ”€â”€ test-gemini-refresh.js
â”‚   â”œâ”€â”€ test-group-scheduling.js
â”‚   â”œâ”€â”€ test-model-mapping.js
â”‚   â”œâ”€â”€ test-pricing-fallback.js
â”‚   â””â”€â”€ test-window-remaining.js
â”‚
â”œâ”€â”€ maintenance/                       # ç»´æŠ¤ç›¸å…³ (5ä¸ª)
â”‚   â”œâ”€â”€ init-database.js              # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”œâ”€â”€ init-email-templates.js       # é‚®ä»¶æ¨¡æ¿åˆå§‹åŒ–
â”‚   â”œâ”€â”€ update-model-pricing.js       # æ›´æ–°æ¨¡å‹ä»·æ ¼
â”‚   â”œâ”€â”€ migrate-apikey-expiry.js      # API Keyè¿ç§»
â”‚   â””â”€â”€ fix-usage-stats.js            # ä¿®å¤ä½¿ç”¨ç»Ÿè®¡
â”‚
â””â”€â”€ tools/                             # è¿ç»´å·¥å…· (10ä¸ª)
    â”œâ”€â”€ view-logs.sh                  # â­ æ—¥å¿—æŸ¥çœ‹
    â”œâ”€â”€ data-transfer-enhanced.js     # â­ æ•°æ®å¯¼å…¥å¯¼å‡º
    â”œâ”€â”€ check-redis-keys.js           # Redisæ£€æŸ¥
    â”œâ”€â”€ analyze-log-sessions.js       # æ—¥å¿—åˆ†æ
    â”œâ”€â”€ manage-session-windows.js     # ä¼šè¯çª—å£ç®¡ç†
    â”œâ”€â”€ status-unified.sh             # çŠ¶æ€æ£€æŸ¥
    â”œâ”€â”€ monitor-enhanced.sh           # å¢å¼ºç›‘æ§
    â”œâ”€â”€ check-gemini-status.sh        # GeminiçŠ¶æ€æ£€æŸ¥
    â”œâ”€â”€ refresh-gemini-token.sh       # Gemini Tokenåˆ·æ–°
    â””â”€â”€ setup-email.sh                # é‚®ä»¶è®¾ç½®
```

---

## âœ¨ æ”¹è¿›ç‚¹

### 1. æ¸…æ™°çš„åˆ†ç±»
- **éƒ¨ç½²**: ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å’Œç¯å¢ƒæ£€æŸ¥
- **æµ‹è¯•**: æ‰€æœ‰æµ‹è¯•ç›¸å…³è„šæœ¬é›†ä¸­ç®¡ç†
- **ç»´æŠ¤**: æ•°æ®åº“ã€æ•°æ®è¿ç§»ã€ä¿®å¤ç­‰ç»´æŠ¤æ“ä½œ
- **å·¥å…·**: æ—¥å¸¸è¿ç»´å·¥å…·ï¼Œå¦‚æ—¥å¿—æŸ¥çœ‹ã€ç›‘æ§ç­‰

### 2. æ ‡è®°é‡è¦è„šæœ¬
åœ¨ README ä¸­ç”¨ â­ æ ‡è®°æœ€å¸¸ç”¨çš„è„šæœ¬ï¼š
- `deploy-optimized.sh` - ç”Ÿäº§éƒ¨ç½²
- `manage.js` - æœåŠ¡ç®¡ç†
- `test-api.js` - APIæµ‹è¯•
- `view-logs.sh` - æ—¥å¿—æŸ¥çœ‹
- `data-transfer-enhanced.js` - æ•°æ®å¤‡ä»½

### 3. å®Œå–„çš„æ–‡æ¡£
- æ¯ä¸ªè„šæœ¬éƒ½æœ‰è¯¦ç»†çš„ç”¨é€”è¯´æ˜
- æä¾›ä½¿ç”¨ç¤ºä¾‹
- åŒ…å«å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨
- æ·»åŠ æ³¨æ„äº‹é¡¹å’Œæœ€ä½³å®è·µ

### 4. ç»Ÿä¸€çš„ä½¿ç”¨æ–¹å¼
- ä¿æŒåŸæœ‰çš„è°ƒç”¨è·¯å¾„å…¼å®¹æ€§
- npm scripts ç»§ç»­å¯ç”¨
- æä¾›ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„ä¸¤ç§è°ƒç”¨æ–¹å¼

---

## ğŸ”„ è¿ç§»æŒ‡å—

### æ—§è·¯å¾„ â†’ æ–°è·¯å¾„

#### éƒ¨ç½²è„šæœ¬
```bash
# æ—§
./scripts/deploy-optimized.sh
# æ–°
./scripts/deployment/deploy-optimized.sh

# æ—§
./scripts/check-env.sh
# æ–°
./scripts/deployment/check-env.sh
```

#### æµ‹è¯•è„šæœ¬
```bash
# æ—§
node scripts/test-api.js
# æ–°
node scripts/testing/test-api.js

# æ—§
node scripts/generate-test-data.js
# æ–°
node scripts/testing/generate-test-data.js
```

#### ç»´æŠ¤è„šæœ¬
```bash
# æ—§
node scripts/init-database.js
# æ–°
node scripts/maintenance/init-database.js

# æ—§
node scripts/fix-usage-stats.js
# æ–°
node scripts/maintenance/fix-usage-stats.js
```

#### å·¥å…·è„šæœ¬
```bash
# æ—§
./scripts/view-logs.sh
# æ–°
./scripts/tools/view-logs.sh

# æ—§
node scripts/data-transfer-enhanced.js
# æ–°
node scripts/tools/data-transfer-enhanced.js
```

### æœåŠ¡ç®¡ç†è„šæœ¬ï¼ˆä¿æŒä¸å˜ï¼‰
```bash
# ä»ç„¶åœ¨æ ¹ç›®å½•
node scripts/manage.js start -d
npm run service:start:daemon
```

---

## ğŸ“ æ³¨æ„äº‹é¡¹

### 1. å‘åå…¼å®¹æ€§
- âš ï¸ æ—§çš„è„šæœ¬è·¯å¾„å·²å¤±æ•ˆ
- âš ï¸ éœ€è¦æ›´æ–°æ‰€æœ‰å¼•ç”¨æ—§è·¯å¾„çš„åœ°æ–¹
- âš ï¸ CI/CD è„šæœ¬éœ€è¦æ›´æ–°è·¯å¾„

### 2. æ–‡æ¡£æ›´æ–°
- âœ… README.md å·²æ›´æ–°
- âœ… deployment.mdc å·²æ›´æ–°
- âš ï¸ å…¶ä»–æ–‡æ¡£å¯èƒ½éœ€è¦æ›´æ–°è„šæœ¬è·¯å¾„

### 3. è‡ªåŠ¨åŒ–è„šæœ¬
- âš ï¸ æ£€æŸ¥ package.json ä¸­çš„è„šæœ¬è·¯å¾„
- âš ï¸ æ£€æŸ¥ CI/CD é…ç½®æ–‡ä»¶
- âš ï¸ æ£€æŸ¥å…¶ä»–è‡ªåŠ¨åŒ–å·¥å…·çš„é…ç½®

---

## ğŸ¯ åç»­ä¼˜åŒ–å»ºè®®

### çŸ­æœŸ
1. âœ… æ›´æ–°æ‰€æœ‰æ–‡æ¡£ä¸­çš„è„šæœ¬è·¯å¾„å¼•ç”¨
2. â¬œ åœ¨ package.json ä¸­æ·»åŠ å¿«æ·å‘½ä»¤
3. â¬œ åˆ›å»ºè„šæœ¬ä½¿ç”¨æ•™ç¨‹è§†é¢‘

### ä¸­æœŸ
1. â¬œ ä¸ºæ¯ä¸ªè„šæœ¬æ·»åŠ  `--help` å‚æ•°
2. â¬œ ç»Ÿä¸€é”™è¯¯å¤„ç†å’Œæ—¥å¿—æ ¼å¼
3. â¬œ æ·»åŠ è„šæœ¬æ‰§è¡Œæƒé™æ£€æŸ¥

### é•¿æœŸ
1. â¬œ å¼€å‘ç»Ÿä¸€çš„è„šæœ¬ç®¡ç† CLI å·¥å…·
2. â¬œ æ·»åŠ è„šæœ¬æ‰§è¡Œå†å²è®°å½•
3. â¬œ å®ç°è„šæœ¬ä¾èµ–ç®¡ç†

---

## ğŸ“ åé¦ˆ

å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š
1. æŸ¥çœ‹ [README.md](./README.md) è·å–è¯¦ç»†æ–‡æ¡£
2. æŸ¥çœ‹ [éƒ¨ç½²è§„åˆ™](../.cursor/rules/deployment.mdc)
3. è”ç³»å¼€å‘å›¢é˜Ÿ

---

**é‡ç»„å®Œæˆæ—¶é—´**: 2025-10-29  
**é‡ç»„æ‰§è¡Œäºº**: AI Assistant  
**å®¡æ ¸çŠ¶æ€**: âœ… å·²å®Œæˆ

